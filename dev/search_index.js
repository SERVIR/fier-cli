var documenterSearchIndex = {"docs":
[{"location":"usage/#FIER-CLI-Usage","page":"Usage","title":"FIER CLI Usage","text":"","category":"section"},{"location":"usage/","page":"Usage","title":"Usage","text":"The FIER command line application is used for two straightforward commands:","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"buildregressions : used to extract spatial/temporal patterns from satellite observations and build regressions to hydrologic variables. The outputs will be saved to a netCDF file for later use. Often times this process needs just to be run every so often.\nsynthesis : used to synthesize inundation extent using hydrologic variables and the regressions from step 1. This may be run more regularly depending on how often water extents need to be produced.","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"Below is workflow showing an implementation using data the Mekong region. Step 1 from above is seen on the left side of the workflow where are the right side represents step 2.","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"(Image: FIER Worflow) Figure created by Chi-Hung Chang","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"Step 1 can be executed using the following command:","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"./fierapp/bin/fier buildregressions -c config.toml","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"Step 2 can be executed using the following command:","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"./fierapp/bin/fier synthesis -c config.toml","category":"page"},{"location":"usage/","page":"Usage","title":"Usage","text":"The only input into the commands are a configuration file which specifies the data inputs and outputs. The configuration files follow a specific format with sections for the program to parse, detailed information on how to setup the configuration files can be found on the Configuration docs page","category":"page"},{"location":"#fier-cli","page":"Home","title":"fier-cli","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Command line interface for running the Forecasting of Inundation Extents using REOF process","category":"page"},{"location":"#Installation","page":"Home","title":"Installation","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This software is written using the Julia language, thus Julia needs to be installed for use (it is recommended to use the official binaries). No other dependencies are required, the build script illustrated below installs all of the necessary packages and dependencies.","category":"page"},{"location":"","page":"Home","title":"Home","text":"git clone https://github.com/serivr/fier-cli.git\n\ncd fier-cli/build/\n\njulia --color=yes buildcli.jl","category":"page"},{"location":"","page":"Home","title":"Home","text":"After running buildcli.jl there will be some output to the console and a directory called \"fierapp\" in the build directory.","category":"page"},{"location":"","page":"Home","title":"Home","text":"At this time, we do not distribute pre-built bundles of the fier-cli due to the size of the compiled application. This is due to the FIER application being build with the MKL backend for BLAS/LinearAlgebra which results in a larger package (>2GB) but faster runtimes for the computationally intensive operations.","category":"page"},{"location":"#Compatiability","page":"Home","title":"Compatiability","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"This software has been built and tested using the following platforms and Julia versions:","category":"page"},{"location":"","page":"Home","title":"Home","text":"Operating System OS Version Julia Version\nMacOS 11.6 v1.6.4 <br/> v1.7.0\nLinux tbd tbd","category":"page"},{"location":"","page":"Home","title":"Home","text":"Please note that this software is free/open source and comes with no guarantees, expressed or implied, as to suitability, completeness, accuracy, and whatever other claims. If there is an bug or suggestion with the application, please submit an issue on GitHub and we will try to address as quickly as possible.","category":"page"},{"location":"","page":"Home","title":"Home","text":"After the build script is run, there you can see three folders in the \"fierapp\" directory. The only file that is directly used is bin/fier. All three folders need to stay together though because the program relies on the others. The program can be tested using the following command:","category":"page"},{"location":"","page":"Home","title":"Home","text":"./fierapp/bin/fier -h\n","category":"page"},{"location":"","page":"Home","title":"Home","text":"The output should look like the following:","category":"page"},{"location":"","page":"Home","title":"Home","text":"usage: <PROGRAM> -c CONFIG [--verbose] [--version] [-h] subcommand\n\nForecasting of Inundation Extents using REOF (FIER) Command Line\nApplication\n\npositional arguments:\n  subcommand           which operation to run, options are\n                       'buildregressions', 'synthesis'\n\noptional arguments:\n  -c, --config CONFIG  toml file specifying the configuration for\n                       command\n  --verbose            flag to set the process to print info\n  --version            show version information and exit\n  -h, --help           show this help message and exit","category":"page"},{"location":"","page":"Home","title":"Home","text":"See the documentation on detailed information on how to structure the configuration files and run the different processes.","category":"page"},{"location":"#References","page":"Home","title":"References","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Chang, C. H., Lee, H., Kim, D., Hwang, E., Hossain, F., Chishtie, F., Jayasinghe, S. & Basnayake, S. (2020). Hindcast and forecast of daily inundation extents using satellite SAR and altimetry data with rotated empirical orthogonal function analysis: Case study in Tonle Sap Lake Floodplain. Remote Sensing of Environment, 241, 111732. https://doi.org/10.1016/j.rse.2020.111732","category":"page"},{"location":"config/#FIER-Configuration-Files","page":"Configuration","title":"FIER Configuration Files","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"The different options and data setup for running FIER is defined using configuration files. The configuration files for different subcommands follow similar patterns but have different options and required fields for extracting/setting up the commands.","category":"page"},{"location":"config/#buildregressions","page":"Configuration","title":"buildregressions","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"An example of a configuration file for the buildregressions command can be found on the Github repo: https://github.com/SERVIR/fier-cli/blob/main/test/testregressionconfig.toml","category":"page"},{"location":"config/#[input]","page":"Configuration","title":"[input]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"The inputs section defines the input netCDF file and structure of dimensions to extract data.","category":"page"},{"location":"config/","page":"Configuration","title":"Configuration","text":"path : Full path to netCDF file of space-time observations to extract signals from\ntimevar : variable name for time dimension in netCDF file\nxvar : variable name for x coordinate dimension in netCDF file\nyvar : variable name for y coordinate in netCDF file\ndatavar : variable name for y coordinate in netCDF file","category":"page"},{"location":"config/#Example","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[input]\npath = \"~/fier/inputs/sentinel1_timeseries.nc\"\ntimevar = \"time\"\nxvar = \"lon\"\nyvar = \"lat\"\ndatavar = \"VV\"","category":"page"},{"location":"config/#[tables]","page":"Configuration","title":"[tables]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"The tables section allows users to specifies multiple series of inputs in tabular format to correlate with the temporal modes derived from the input data. Currently only CSV file format is supported for reading tables.","category":"page"},{"location":"config/","page":"Configuration","title":"Configuration","text":"paths : List of full paths to CSV files to use for building regressions\ntimecol : Column name specifying time (time column should be formatted as YYYY-MM-dd)\ndatacol : Column name of of variable to use in regressions","category":"page"},{"location":"config/#Example-2","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[tables]\npaths = [\n    \"~/fier/inputs/DailyAveH_KH-020101_manual.csv\",\n    \"~/fier/inputs/DailyAveH_KH-020102_manual.csv\",\n]\ntimecol = \"Date\"\ndatacol = \"H\"","category":"page"},{"location":"config/#[geoglows]","page":"Configuration","title":"[geoglows]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"The GEOGloWS streamflow service provides modeled streamflow for every reach across the globe. This section provides users with the capability to read in the netCDF files from the service and use to build regressions.","category":"page"},{"location":"config/","page":"Configuration","title":"Configuration","text":"paths : Full path to GEOGloWS netCDF file\nrivids : List of river ID values to extract and build regressions from","category":"page"},{"location":"config/#Example-3","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[geoglows]\npath = \"~/fier/inputs/Qout_era5_t640_24hr_19790101to20210630.nc\"\nrivids = [\n    5074949,\n    5075705,\n]","category":"page"},{"location":"config/#[output]","page":"Configuration","title":"[output]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"The output section defines where the output file should be written to. This section has one field:","category":"page"},{"location":"config/","page":"Configuration","title":"Configuration","text":"path: Full path to write output to","category":"page"},{"location":"config/#Example-4","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[output]\npath = \"~/fier/outputs/reof_regressions.nc\"","category":"page"},{"location":"config/#[options]","page":"Configuration","title":"[options]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"These are optional configuration parameters that a user can specify. If no options are provided then the program will use defaults. A list of options are as follows:","category":"page"},{"location":"config/","page":"Configuration","title":"Configuration","text":"nsimulations : number of Monte Carlo iterations to test for significant modes in REOF analysis. Default = 10\nnmodes : number of modes to select from REOF analysis. Providing this option will supersedes nsimulations. Default = nothing\nremoveoutliers : remove outliers from tables/geoglows inputs before calculating regression coeffcients. Default = true","category":"page"},{"location":"config/#Example-5","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[options]\nnsimulations = 10\nremoveoutliers = true","category":"page"},{"location":"config/#synthesis","page":"Configuration","title":"synthesis","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"An example of a configuration file for the synthesis command can be found on the Github repo: https://github.com/SERVIR/fier-cli/blob/main/test/testsynthesisconfig.toml","category":"page"},{"location":"config/#[input]-2","page":"Configuration","title":"[input]","text":"","category":"section"},{"location":"config/#Example-6","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[input]\npath = \"~/fier/outputs/reof_regressions.nc\"\ntimevar = \"time\"\nxvar = \"lon\"\nyvar =\"lat\"","category":"page"},{"location":"config/#[tables]-2","page":"Configuration","title":"[tables]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"The tables section is used to specify the multiple series of inputs in tabular format to apply the regression equations to for synthesizing data. NOTE: the order of tables should be the same as what was provided to buildregressions. Currently only CSV file format is supported for reading tables.","category":"page"},{"location":"config/","page":"Configuration","title":"Configuration","text":"paths : List of full paths to CSV files to use for building regressions\ntimecol : Column name specifying time (time column should be formatted as YYYY-MM-dd)\ndatacol : Column name of of variable to use in regressions","category":"page"},{"location":"config/#Example-7","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[tables]\npaths = [\n    \"~/fier/inputs/DailyAveH_KH-020101_manual.csv\",\n    \"~/fier/inputs/DailyAveH_KH-020102_manual.csv\",\n]\ntimecol = \"Date\"\ndatacol = \"H\"","category":"page"},{"location":"config/#[geoglows]-2","page":"Configuration","title":"[geoglows]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"This allows users to use GEOGloWS netCDF files for synthesizing data. NOTE: the order of river IDs should be the same as what was provided to buildregressions.","category":"page"},{"location":"config/","page":"Configuration","title":"Configuration","text":"paths : Full path to GEOGloWS netCDF file\nrivids : List of river ID values to extract and use in regressions","category":"page"},{"location":"config/#Example-8","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[geoglows]\npath = \"~/fier/inputs/Qout_era5_t640_24hr_19790101to20210630.nc\"\nrivids = [\n    5074949,\n    5075705,\n]","category":"page"},{"location":"config/#[output]-2","page":"Configuration","title":"[output]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"path : Full path to write output to\ndaterange : List specifying start time and end time to synthesize data\ndates : List of dates to synthesize. This supersedes daterange","category":"page"},{"location":"config/#Example-9","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[output]\npath = \"~/fier/outputs/reof_synthesis.nc\"\ndaterange = [\"2019-01-01\",\"2019-12-31\"]","category":"page"},{"location":"config/#[options]-2","page":"Configuration","title":"[options]","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"corthresh : correlation threshold used to filter out weakly correlated modes. NOTE: uses absolute correlation. Default = 0.6\nwater : segment water from synthesized data and write to output. Uses methods from Markert et al., 2020 for segmenting water. Default = true","category":"page"},{"location":"config/#Example-10","page":"Configuration","title":"Example","text":"","category":"section"},{"location":"config/","page":"Configuration","title":"Configuration","text":"[options]\ncorthresh = 0.6\nwater = true","category":"page"}]
}
