<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Configuration · FIER CLI</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><script src="../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FIER CLI</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li class="is-active"><a class="tocitem" href>Configuration</a><ul class="internal"><li><a class="tocitem" href="#buildregressions"><span><code>buildregressions</code></span></a></li><li><a class="tocitem" href="#synthesis"><span><code>synthesis</code></span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Configuration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Configuration</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/SERVIR/fier-cli/blob/master/docs/src/config.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="FIER-Configuration-Files"><a class="docs-heading-anchor" href="#FIER-Configuration-Files">FIER Configuration Files</a><a id="FIER-Configuration-Files-1"></a><a class="docs-heading-anchor-permalink" href="#FIER-Configuration-Files" title="Permalink"></a></h1><p>The different options and data setup for running FIER is defined using configuration files. The configuration files for different subcommands follow similar patterns but have different options and required fields for extracting/setting up the commands.</p><h2 id="buildregressions"><a class="docs-heading-anchor" href="#buildregressions"><code>buildregressions</code></a><a id="buildregressions-1"></a><a class="docs-heading-anchor-permalink" href="#buildregressions" title="Permalink"></a></h2><p>An example of a configuration file for the <code>buildregressions</code> command can be found on the Github repo: <a href="https://github.com/SERVIR/fier-cli/blob/main/test/test_regression_config.toml">Regression config example</a></p><h3 id="[input]"><a class="docs-heading-anchor" href="#[input]">[input]</a><a id="[input]-1"></a><a class="docs-heading-anchor-permalink" href="#[input]" title="Permalink"></a></h3><p>The inputs section defines the input netCDF file and structure of dimensions to extract data. The time dimension in the input file is used to select data from other time series.</p><ul><li><code>path</code> : Full path to netCDF file of space-time observations to extract signals from</li><li><code>timevar</code> : variable name for time dimension in netCDF file</li><li><code>xvar</code> : variable name for x coordinate dimension in netCDF file</li><li><code>yvar</code> : variable name for y coordinate in netCDF file</li><li><code>datavar</code> : variable name for data to use in netCDF file</li></ul><h4 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[input]
path = &quot;~/fier/inputs/sentinel1_timeseries.nc&quot;
timevar = &quot;time&quot;
xvar = &quot;lon&quot;
yvar = &quot;lat&quot;
datavar = &quot;VV&quot;</code></pre><h3 id="[tables]"><a class="docs-heading-anchor" href="#[tables]">[tables]</a><a id="[tables]-1"></a><a class="docs-heading-anchor-permalink" href="#[tables]" title="Permalink"></a></h3><p>The tables section allows users to specifies multiple series of inputs in tabular format to correlate with the temporal modes derived from the input data. Currently only CSV file format is supported for reading tables.</p><ul><li><code>paths</code> : List of full paths to CSV files to use for building regressions</li><li><code>timecol</code> : Column name specifying time (time column should be formatted as YYYY-MM-dd)</li><li><code>datacol</code> : Column name of of variable to use in regressions</li></ul><h4 id="Example-2"><a class="docs-heading-anchor" href="#Example-2">Example</a><a class="docs-heading-anchor-permalink" href="#Example-2" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[tables]
paths = [
    &quot;~/fier/inputs/DailyAveH_KH-020101_manual.csv&quot;,
    &quot;~/fier/inputs/DailyAveH_KH-020102_manual.csv&quot;,
]
timecol = &quot;Date&quot;
datacol = &quot;H&quot;</code></pre><h3 id="[geoglows]"><a class="docs-heading-anchor" href="#[geoglows]">[geoglows]</a><a id="[geoglows]-1"></a><a class="docs-heading-anchor-permalink" href="#[geoglows]" title="Permalink"></a></h3><p>The <a href="https://geoglows.ecmwf.int/">GEOGloWS streamflow service</a> provides modeled streamflow for every reach across the globe. This section provides users with the capability to read in the netCDF files from the service and use to build regressions.</p><ul><li><code>paths</code> : Full path to GEOGloWS netCDF file</li><li><code>rivids</code> : List of river ID values to extract and build regressions from</li></ul><h4 id="Example-3"><a class="docs-heading-anchor" href="#Example-3">Example</a><a class="docs-heading-anchor-permalink" href="#Example-3" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[geoglows]
path = &quot;~/fier/inputs/Qout_era5_t640_24hr_19790101to20210630.nc&quot;
rivids = [
    5074949,
    5075705,
]</code></pre><h3 id="[output]"><a class="docs-heading-anchor" href="#[output]">[output]</a><a id="[output]-1"></a><a class="docs-heading-anchor-permalink" href="#[output]" title="Permalink"></a></h3><p>The output section defines where the output file should be written to. This section has one field:</p><ul><li><code>path</code>: Full path to write output to</li></ul><h4 id="Example-4"><a class="docs-heading-anchor" href="#Example-4">Example</a><a class="docs-heading-anchor-permalink" href="#Example-4" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[output]
path = &quot;~/fier/outputs/reof_regressions.nc&quot;</code></pre><h3 id="[options]"><a class="docs-heading-anchor" href="#[options]">[options]</a><a id="[options]-1"></a><a class="docs-heading-anchor-permalink" href="#[options]" title="Permalink"></a></h3><p>These are optional configuration parameters that a user can specify. If no options are provided then the program will use defaults. A list of options are as follows:</p><ul><li><code>nsimulations</code> : number of Monte Carlo iterations to test for significant modes in REOF analysis. Default = 10</li><li><code>nmodes</code> : number of modes to select from REOF analysis. Providing this option will supersedes <code>nsimulations</code>. Default = nothing</li><li><code>removeoutliers</code> : remove outliers from tables/geoglows inputs before calculating regression coeffcients. Default = true</li></ul><h4 id="Example-5"><a class="docs-heading-anchor" href="#Example-5">Example</a><a class="docs-heading-anchor-permalink" href="#Example-5" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[options]
nsimulations = 10
removeoutliers = true</code></pre><h2 id="synthesis"><a class="docs-heading-anchor" href="#synthesis"><code>synthesis</code></a><a id="synthesis-1"></a><a class="docs-heading-anchor-permalink" href="#synthesis" title="Permalink"></a></h2><p>An example of a configuration file for the <code>synthesis</code> command can be found on the Github repo: <a href="https://github.com/SERVIR/fier-cli/blob/main/test/test_synthesis_config.toml">Synthesis config example</a></p><h3 id="[input]-2"><a class="docs-heading-anchor" href="#[input]-2">[input]</a><a class="docs-heading-anchor-permalink" href="#[input]-2" title="Permalink"></a></h3><h4 id="Example-6"><a class="docs-heading-anchor" href="#Example-6">Example</a><a class="docs-heading-anchor-permalink" href="#Example-6" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[input]
path = &quot;~/fier/outputs/reof_regressions.nc&quot;
timevar = &quot;time&quot;
xvar = &quot;lon&quot;
yvar =&quot;lat&quot;</code></pre><h3 id="[tables]-2"><a class="docs-heading-anchor" href="#[tables]-2">[tables]</a><a class="docs-heading-anchor-permalink" href="#[tables]-2" title="Permalink"></a></h3><p>The tables section is used to specify the multiple series of inputs in tabular format to apply the regression equations to for synthesizing data. <strong>NOTE:</strong> <em>the order of tables should be the same as what was provided to <code>buildregressions</code></em>. Currently only CSV file format is supported for reading tables.</p><ul><li><code>paths</code> : List of full paths to CSV files to use for building regressions</li><li><code>timecol</code> : Column name specifying time (time column should be formatted as YYYY-MM-dd)</li><li><code>datacol</code> : Column name of of variable to use in regressions</li></ul><h4 id="Example-7"><a class="docs-heading-anchor" href="#Example-7">Example</a><a class="docs-heading-anchor-permalink" href="#Example-7" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[tables]
paths = [
    &quot;~/fier/inputs/DailyAveH_KH-020101_manual.csv&quot;,
    &quot;~/fier/inputs/DailyAveH_KH-020102_manual.csv&quot;,
]
timecol = &quot;Date&quot;
datacol = &quot;H&quot;</code></pre><h3 id="[geoglows]-2"><a class="docs-heading-anchor" href="#[geoglows]-2">[geoglows]</a><a class="docs-heading-anchor-permalink" href="#[geoglows]-2" title="Permalink"></a></h3><p>This allows users to use GEOGloWS netCDF files for synthesizing data. <strong>NOTE:</strong> <em>the order of river IDs should be the same as what was provided to <code>buildregressions</code></em>.</p><ul><li><code>paths</code> : Full path to GEOGloWS netCDF file</li><li><code>rivids</code> : List of river ID values to extract and use in regressions</li></ul><h4 id="Example-8"><a class="docs-heading-anchor" href="#Example-8">Example</a><a class="docs-heading-anchor-permalink" href="#Example-8" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[geoglows]
path = &quot;~/fier/inputs/Qout_era5_t640_24hr_19790101to20210630.nc&quot;
rivids = [
    5074949,
    5075705,
]</code></pre><h3 id="[output]-2"><a class="docs-heading-anchor" href="#[output]-2">[output]</a><a class="docs-heading-anchor-permalink" href="#[output]-2" title="Permalink"></a></h3><ul><li><code>path</code> : Full path to write output to</li><li><code>daterange</code> : List specifying start time and end time to synthesize data</li><li><code>dates</code> : List of dates to synthesize. This supersedes <code>daterange</code></li></ul><h4 id="Example-9"><a class="docs-heading-anchor" href="#Example-9">Example</a><a class="docs-heading-anchor-permalink" href="#Example-9" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[output]
path = &quot;~/fier/outputs/reof_synthesis.nc&quot;
daterange = [&quot;2019-01-01&quot;,&quot;2019-12-31&quot;]</code></pre><h3 id="[options]-2"><a class="docs-heading-anchor" href="#[options]-2">[options]</a><a class="docs-heading-anchor-permalink" href="#[options]-2" title="Permalink"></a></h3><ul><li><code>corthresh</code> : correlation threshold used to filter out weakly correlated modes. NOTE: uses absolute correlation. Default = 0.6</li><li><code>water</code> : segment water from synthesized data and write to output. Uses methods from <a href="https://doi.org/10.3390/rs12152469">Markert et al., 2020</a> for segmenting water. Default = true</li></ul><h4 id="Example-10"><a class="docs-heading-anchor" href="#Example-10">Example</a><a class="docs-heading-anchor-permalink" href="#Example-10" title="Permalink"></a></h4><pre><code class="nohighlight hljs">[options]
corthresh = 0.6
water = true</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../usage/">« Usage</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Wednesday 26 January 2022 18:16">Wednesday 26 January 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
